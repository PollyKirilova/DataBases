<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Advanced: –¢—Ä–∏–≥–µ—Ä–∏ –∏ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</title>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-color: #e0e0e0;
            --accent-purple: #bb86fc;
            --accent-teal: #03dac6;
            --accent-error: #cf6679;
            --code-bg: #2d2d2d;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        header {
            background: linear-gradient(135deg, #3700b3, #6200ea);
            padding: 2rem;
            text-align: center;
            border-bottom: 4px solid var(--accent-teal);
        }

        h1 { margin: 0; font-size: 2.2rem; color: #fff; }
        .subtitle { font-style: italic; opacity: 0.8; color: var(--accent-teal); }

        .container {
            max-width: 950px;
            margin: 0 auto;
            padding: 20px;
        }

        .section-title {
            color: var(--accent-purple);
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
            margin-top: 50px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            border-left: 5px solid var(--accent-purple);
            box-shadow: 0 4px 6px rgba(0,0,0,0.5);
        }

        .task-box {
            background-color: rgba(187, 134, 252, 0.1);
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border: 1px dashed var(--accent-purple);
        }

        .editor-area {
            width: 100%;
            height: 120px;
            background-color: var(--code-bg);
            color: #f8f8f2;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 10px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.95rem;
            resize: vertical;
            outline: none;
            box-sizing: border-box;
        }
        
        .editor-area:focus { border-color: var(--accent-teal); }

        .btn {
            background-color: var(--accent-purple);
            color: #000;
            border: none;
            padding: 10px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
            transition: 0.2s;
        }

        .btn:hover { background-color: #9955e8; }
        
        .result-console {
            background-color: #000;
            font-family: monospace;
            padding: 15px;
            margin-top: 10px;
            border-radius: 5px;
            display: none;
            border: 1px solid #333;
            white-space: pre-wrap;
        }

        code { color: var(--accent-teal); background: #333; padding: 2px 5px; border-radius: 3px; }

        .tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .tag-trigger { background-color: #3700b3; color: white; }
        .tag-transaction { background-color: #018786; color: white; }

        footer { text-align: center; padding: 30px; color: #666; font-size: 0.8rem; margin-top: 50px; }
    </style>
</head>
<body>

<header>
    <h1>‚öôÔ∏è SQL Master: Advanced</h1>
    <p class="subtitle">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Å –±–∞–∑–∞—Ç–∞ –Ω–∞ W3Schools: Customers, Products, Orders</p>
</header>

<div class="container">

    <h2 class="section-title">I. –¢—Ä–∏–≥–µ—Ä–∏ (–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)</h2>
    <p>–¢—Ä–∏–≥–µ—Ä–∏—Ç–µ —Å–∞ –∫–æ–¥, –∫–æ–π—Ç–æ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ INSERT, UPDATE –∏–ª–∏ DELETE.</p>

    <div class="card">
        <span class="tag tag-trigger">TRIGGER 1</span>
        <h3>üëÆ‚Äç‚ôÇÔ∏è –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Ü–µ–Ω–∏</h3>
        <div class="task-box">
            <strong>–ó–∞–¥–∞—á–∞:</strong> –ù–µ –ø–æ–∑–≤–æ–ª—è–≤–∞–π—Ç–µ –≤ —Ç–∞–±–ª–∏—Ü–∞ <code>Products</code> –¥–∞ —Å–µ –≤—ä–≤–µ–∂–¥–∞—Ç –ø—Ä–æ–¥—É–∫—Ç–∏ —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–Ω–∞ —Ü–µ–Ω–∞.
            <br>–°—ä–∑–¥–∞–π—Ç–µ —Ç—Ä–∏–≥–µ—Ä <code>check_price</code> (BEFORE INSERT), –∫–æ–π—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ <code>NEW.Price < 0</code>. –ê–∫–æ –µ —Ç–∞–∫–∞, –Ω–∞–ø—Ä–∞–≤–µ—Ç–µ —Ü–µ–Ω–∞—Ç–∞ 0.
        </div>
        <textarea id="t1" class="editor-area" placeholder="CREATE TRIGGER check_price BEFORE INSERT ON Products..."></textarea>
        <button class="btn" onclick="checkTrigger(1)">–ü—Ä–æ–≤–µ—Ä–∏</button>
        <div id="r-t1" class="result-console"></div>
    </div>

    <div class="card">
        <span class="tag tag-trigger">TRIGGER 2</span>
        <h3>üìù –õ–æ–≥ –Ω–∞ –∏–∑—Ç—Ä–∏—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∏</h3>
        <div class="task-box">
            <strong>–ó–∞–¥–∞—á–∞:</strong> –ö–æ–≥–∞—Ç–æ –∏–∑—Ç—Ä–∏–µ–º –∫–ª–∏–µ–Ω—Ç –æ—Ç <code>Customers</code>, –∏—Å–∫–∞–º–µ –¥–∞ –∑–∞–ø–∞–∑–∏–º –∏–º–µ—Ç–æ –º—É –≤ —Ç–∞–±–ª–∏—Ü–∞ <code>DeletedUsers</code>.
            <br>–°—ä–∑–¥–∞–π—Ç–µ —Ç—Ä–∏–≥–µ—Ä (AFTER DELETE), –∫–æ–π—Ç–æ –∑–∞–ø–∏—Å–≤–∞ <code>OLD.CustomerName</code> –∏ —Ç–µ–∫—É—â–∞—Ç–∞ –¥–∞—Ç–∞ <code>NOW()</code>.
        </div>
        <textarea id="t2" class="editor-area" placeholder="CREATE TRIGGER log_delete AFTER DELETE ON Customers..."></textarea>
        <button class="btn" onclick="checkTrigger(2)">–ü—Ä–æ–≤–µ—Ä–∏</button>
        <div id="r-t2" class="result-console"></div>
    </div>

    <div class="card">
        <span class="tag tag-trigger">TRIGGER 3</span>
        <h3>üî† –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω –≥–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏</h3>
        <div class="task-box">
            <strong>–ó–∞–¥–∞—á–∞:</strong> –ò—Å–∫–∞–º–µ –∫–æ–¥–æ–≤–µ—Ç–µ –Ω–∞ –¥—ä—Ä–∂–∞–≤–∏—Ç–µ –≤–∏–Ω–∞–≥–∏ –¥–∞ —Å–∞ —Å –≥–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏.
            <br>–ü—Ä–∏ INSERT –≤ <code>Customers</code>, –ø—Ä–æ–º–µ–Ω–µ—Ç–µ <code>NEW.Country</code> –¥–∞ –±—ä–¥–µ —Ä–∞–≤–Ω–æ –Ω–∞ <code>UPPER(NEW.Country)</code>.
        </div>
        <textarea id="t3" class="editor-area" placeholder="CREATE TRIGGER uppercase_country BEFORE INSERT..."></textarea>
        <button class="btn" onclick="checkTrigger(3)">–ü—Ä–æ–≤–µ—Ä–∏</button>
        <div id="r-t3" class="result-console"></div>
    </div>

    <div class="card">
        <span class="tag tag-trigger">TRIGGER 4</span>
        <h3>üõë –ó–∞—â–∏—Ç–∞ –Ω–∞ —Å–∫–ª–∞–¥</h3>
        <div class="task-box">
            <strong>–ó–∞–¥–∞—á–∞:</strong> (–°–∏–º—É–ª–∞—Ü–∏—è) –ü—Ä–µ–¥—Å—Ç–∞–≤–µ—Ç–µ —Å–∏, —á–µ –∏–º–∞ –∫–æ–ª–æ–Ω–∞ <code>Stock</code> –≤ Products.
            <br>–ù–µ –ø–æ–∑–≤–æ–ª—è–≤–∞–π—Ç–µ –ø—Ä–æ–¥–∞–∂–±–∞ (UPDATE), –∞–∫–æ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç—Ç–∞ —Å—Ç–∞–Ω–µ –ø–æ–¥ 0. –ê–∫–æ <code>NEW.Stock < 0</code>, –≤—ä—Ä–Ω–µ—Ç–µ –≥—Ä–µ—à–∫–∞ (SIGNAL SQLSTATE...).
        </div>
        <textarea id="t4" class="editor-area" placeholder="... IF NEW.Stock < 0 THEN SIGNAL SQLSTATE ..."></textarea>
        <button class="btn" onclick="checkTrigger(4)">–ü—Ä–æ–≤–µ—Ä–∏</button>
        <div id="r-t4" class="result-console"></div>
    </div>

    <div class="card">
        <span class="tag tag-trigger">TRIGGER 5</span>
        <h3>üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h3>
        <div class="task-box">
            <strong>–ó–∞–¥–∞—á–∞:</strong> –ü—Ä–∏ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ —Ü–µ–Ω–∞—Ç–∞ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç (UPDATE) –≤ <code>Products</code>, –∑–∞–ø–∏—à–µ—Ç–µ —Å—Ç–∞—Ä–∞—Ç–∞ —Ü–µ–Ω–∞ –≤ —Ç–∞–±–ª–∏—Ü–∞ <code>PriceHistory</code>.
            <br>–ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ <code>OLD.Price</code> –∏ <code>NEW.Price</code>.
        </div>
        <textarea id="t5" class="editor-area" placeholder="CREATE TRIGGER price_history AFTER UPDATE..."></textarea>
        <button class="btn" onclick="checkTrigger(5)">–ü—Ä–æ–≤–µ—Ä–∏</button>
        <div id="r-t5" class="result-console"></div>
    </div>


    <h2 class="section-title">II. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–í—Å–∏—á–∫–æ –∏–ª–∏ –Ω–∏—â–æ)</h2>
    <p>–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏—Ç–µ –≥—Ä—É–ø–∏—Ä–∞—Ç –∑–∞—è–≤–∫–∏. –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ <code>START TRANSACTION</code> (–∏–ª–∏ BEGIN), <code>COMMIT</code> (–∑–∞–ø–∏—Å) –∏ <code>ROLLBACK</code> (–æ—Ç–∫–∞–∑).</p>

    <div class="card">
        <span class="tag tag-transaction">TRANSACTION 1</span>
        <h3>üì¶ –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∞ (Atomic)</h3>
        <div class="task-box">
            <strong>–ó–∞–¥–∞—á–∞:</strong> –¢—Ä—è–±–≤–∞ –¥–∞ —Å—ä–∑–¥–∞–¥–µ–º –ø–æ—Ä—ä—á–∫–∞ –∏ –¥–µ—Ç–∞–π–ª–∏ –∑–∞ –Ω–µ—è –µ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
            <br>1. –ó–∞–ø–æ—á–Ω–µ—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è.<br>2. –í–∫–∞—Ä–∞–π—Ç–µ –∑–∞–ø–∏—Å –≤ <code>Orders</code>.<br>3. –í–∫–∞—Ä–∞–π—Ç–µ –∑–∞–ø–∏—Å –≤ <code>OrderDetails</code>.<br>4. –ü–æ—Ç–≤—ä—Ä–¥–µ—Ç–µ (COMMIT).
        </div>
        <textarea id="tx1" class="editor-area" placeholder="START TRANSACTION;&#10;INSERT INTO Orders...;&#10;INSERT INTO OrderDetails...;&#10;COMMIT;"></textarea>
        <button class="btn" onclick="checkTx(1)">–ü—Ä–æ–≤–µ—Ä–∏</button>
        <div id="r-tx1" class="result-console"></div>
    </div>

    <div class="card">
        <span class="tag tag-transaction">TRANSACTION 2</span>
        <h3>üîô –ì—Ä–µ—à–∫–∞ –∏ –≤—Ä—ä—â–∞–Ω–µ (Rollback)</h3>
        <div class="task-box">
            <strong>–ó–∞–¥–∞—á–∞:</strong> –û–ø–∏—Ç–∞—Ö—Ç–µ –¥–∞ –∏–∑—Ç—Ä–∏–µ—Ç–µ –≥—Ä–µ—à–µ–Ω –∫–ª–∏–µ–Ω—Ç.
            <br>1. –ó–∞–ø–æ—á–Ω–µ—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è.<br>2. –ò–∑—Ç—Ä–∏–π—Ç–µ –≤—Å–∏—á–∫–∏ –∫–ª–∏–µ–Ω—Ç–∏ –æ—Ç 'Mexico' (DELETE FROM Customers...).<br>3. –û—Å—ä–∑–Ω–∞—Ö—Ç–µ –≥—Ä–µ—à–∫–∞—Ç–∞ —Å–∏! –í—ä—Ä–Ω–µ—Ç–µ –Ω–∞–∑–∞–¥ (ROLLBACK).
        </div>
        <textarea id="tx2" class="editor-area" placeholder="BEGIN;&#10;DELETE FROM...&#10;ROLLBACK;"></textarea>
        <button class="btn" onclick="checkTx(2)">–ü—Ä–æ–≤–µ—Ä–∏</button>
        <div id="r-tx2" class="result-console"></div>
    </div>

    <div class="card">
        <span class="tag tag-transaction">TRANSACTION 3</span>
        <h3>üè∑Ô∏è –ú–∞—Å–æ–≤–∞ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ —Ü–µ–Ω–∏</h3>
        <div class="task-box">
            <strong>–ó–∞–¥–∞—á–∞:</strong> –®–µ—Ñ—ä—Ç –∏—Å–∫–∞ –¥–∞ —É–≤–µ–ª–∏—á–∏ —Ü–µ–Ω–∏—Ç–µ, –Ω–æ —Å–∞–º–æ –∞–∫–æ —Å–º–µ —Å–∏–≥—É—Ä–Ω–∏.
            <br>–ù–∞–ø–∏—à–µ—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, –∫–æ—è—Ç–æ —É–≤–µ–ª–∏—á–∞–≤–∞ —Ü–µ–Ω–∏—Ç–µ –≤ <code>Products</code> —Å 10% –∏ –≤–µ–¥–Ω–∞–≥–∞ —Å–ª–µ–¥ —Ç–æ–≤–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–∞–≤–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ.
        </div>
        <textarea id="tx3" class="editor-area" placeholder="START TRANSACTION;&#10;UPDATE Products...&#10;COMMIT;"></textarea>
        <button class="btn" onclick="checkTx(3)">–ü—Ä–æ–≤–µ—Ä–∏</button>
        <div id="r-tx3" class="result-console"></div>
    </div>

    <div class="card">
        <span class="tag tag-transaction">TRANSACTION 4</span>
        <h3>‚ö†Ô∏è –¢—Ä–∞–Ω—Å—Ñ–µ—Ä –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è (–°–ª–æ–∂–Ω–∞ –ª–æ–≥–∏–∫–∞)</h3>
        <div class="task-box">
            <strong>–ó–∞–¥–∞—á–∞:</strong> –¢—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–µ–º–µ—Å—Ç–∏–º –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ –æ—Ç –ö–∞—Ç–µ–≥–æ—Ä–∏—è 1 –≤ –ö–∞—Ç–µ–≥–æ—Ä–∏—è 2 –∏ –¥–∞ –∏–∑—Ç—Ä–∏–µ–º –ö–∞—Ç–µ–≥–æ—Ä–∏—è 1.
            <br>–ò–∑–ø—ä–ª–Ω–µ—Ç–µ 3 —Å—Ç—ä–ø–∫–∏ –≤ –µ–¥–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è: UPDATE –ø—Ä–æ–¥—É–∫—Ç–∏—Ç–µ, DELETE –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ç–∞, COMMIT.
        </div>
        <textarea id="tx4" class="editor-area" placeholder="START TRANSACTION;&#10;UPDATE Products SET CategoryID=2...&#10;DELETE FROM Categories...&#10;COMMIT;"></textarea>
        <button class="btn" onclick="checkTx(4)">–ü—Ä–æ–≤–µ—Ä–∏</button>
        <div id="r-tx4" class="result-console"></div>
    </div>

    <div class="card">
        <span class="tag tag-transaction">TRANSACTION 5</span>
        <h3>‚öì Savepoint (–ö–æ–Ω—Ç—Ä–æ–ª–Ω–∞ —Ç–æ—á–∫–∞)</h3>
        <div class="task-box">
            <strong>–ó–∞–¥–∞—á–∞:</strong> –ó–∞ –Ω–∞–ø—Ä–µ–¥–Ω–∞–ª–∏: –ù–∞–ø—Ä–∞–≤–µ—Ç–µ –ø—Ä–æ–º—è–Ω–∞, —Å–ª–æ–∂–µ—Ç–µ SAVEPOINT, –Ω–∞–ø—Ä–∞–≤–µ—Ç–µ –≥—Ä–µ—à–∫–∞, –≤—ä—Ä–Ω–µ—Ç–µ —Å–µ —Å–∞–º–æ –¥–æ SAVEPOINT.
            <br>–°—Ç—Ä—É–∫—Ç—É—Ä–∞: BEGIN -> UPDATE -> SAVEPOINT SP1 -> DELETE (–≥—Ä–µ—à–∫–∞) -> ROLLBACK TO SP1 -> COMMIT.
        </div>
        <textarea id="tx5" class="editor-area" placeholder="BEGIN;&#10;UPDATE...&#10;SAVEPOINT SP1;&#10;DELETE...&#10;ROLLBACK TO SP1;&#10;COMMIT;"></textarea>
        <button class="btn" onclick="checkTx(5)">–ü—Ä–æ–≤–µ—Ä–∏</button>
        <div id="r-tx5" class="result-console"></div>
    </div>

</div>

<footer>
    <p>SoftUni Training Simulation | Generated for 11. Grade</p>
</footer>

<script>
    function normalize(text) {
        return text.toLowerCase().replace(/\s+/g, ' ').trim();
    }

    function showResult(elementId, success, msg) {
        const el = document.getElementById(elementId);
        el.style.display = 'block';
        el.style.color = success ? '#03dac6' : '#cf6679';
        el.innerText = (success ? '‚úî –£–°–ü–ï–•: ' : '‚ùå –ì–†–ï–®–ö–ê: ') + msg;
    }

    // --- –ü–†–û–í–ï–†–ö–ê –¢–†–ò–ì–ï–†–ò ---
    function checkTrigger(id) {
        const val = normalize(document.getElementById('t' + id).value);
        let success = false, msg = "";

        if (id === 1) { // Check Price
            if (val.includes('before insert') && val.includes('products') && val.includes('new.price < 0')) {
                success = true; msg = "–¢—Ä–∏–≥–µ—Ä—ä—Ç –µ –≤–∞–ª–∏–¥–µ–Ω! –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª–Ω–∏—Ç–µ —Ü–µ–Ω–∏ —â–µ –±—ä–¥–∞—Ç –∫–æ—Ä–∏–≥–∏—Ä–∞–Ω–∏.";
            } else msg = "–¢—Ä—è–±–≤–∞ –¥–∞ –µ BEFORE INSERT ON Products –∏ –¥–∞ –ø—Ä–æ–≤–µ—Ä—è–≤–∞ NEW.Price.";
        }
        else if (id === 2) { // Log Delete
            if (val.includes('after delete') && val.includes('customers') && val.includes('old.customername')) {
                success = true; msg = "–õ–æ–≥–≤–∞–Ω–µ—Ç–æ —Ä–∞–±–æ—Ç–∏. –ò–∑—Ç—Ä–∏—Ç–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∏ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç.";
            } else msg = "–ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ AFTER DELETE –∏ –≤–∑–µ–º–µ—Ç–µ –∏–º–µ—Ç–æ —á—Ä–µ–∑ OLD.CustomerName.";
        }
        else if (id === 3) { // Uppercase
            if (val.includes('before insert') && val.includes('upper(new.country)')) {
                success = true; msg = "–î—ä—Ä–∂–∞–≤–∏—Ç–µ —â–µ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç —Å –≥–ª–∞–≤–Ω–∏ –±—É–∫–≤–∏.";
            } else msg = "–õ–∏–ø—Å–≤–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ UPPER() –∏–ª–∏ –º–æ–º–µ–Ω—Ç—ä—Ç –Ω–µ –µ BEFORE INSERT.";
        }
        else if (id === 4) { // Stock Protection
            if ((val.includes('signal') || val.includes('error')) && val.includes('new.stock < 0')) {
                success = true; msg = "–ó–∞—â–∏—Ç–∞—Ç–∞ –µ –∞–∫—Ç–∏–≤–Ω–∞. –ù–µ –º–æ–∂–µ –¥–∞ –ø—Ä–æ–¥–∞–≤–∞—Ç–µ –ø–æ–¥ 0.";
            } else msg = "–¢—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç–µ NEW.Stock –∏ –¥–∞ —Ö–≤—ä—Ä–ª–∏—Ç–µ –≥—Ä–µ—à–∫–∞ (SIGNAL/ERROR).";
        }
        else if (id === 5) { // Price History
            if (val.includes('after update') && val.includes('old.price') && val.includes('new.price')) {
                success = true; msg = "–ò—Å—Ç–æ—Ä–∏—è—Ç–∞ –Ω–∞ —Ü–µ–Ω–∏—Ç–µ —Å–µ –ø–∞–∑–∏ —É—Å–ø–µ—à–Ω–æ.";
            } else msg = "–ü—Ä–∏ –ø—Ä–æ–º—è–Ω–∞ (UPDATE) —Ç—Ä—è–±–≤–∞ –¥–∞ –¥–æ—Å—Ç—ä–ø–∏—Ç–µ —Å—Ç–∞—Ä–∞—Ç–∞ (OLD) –∏ –Ω–æ–≤–∞—Ç–∞ (NEW) —Ü–µ–Ω–∞.";
        }
        showResult('r-t' + id, success, msg);
    }

    // --- –ü–†–û–í–ï–†–ö–ê –¢–†–ê–ù–ó–ê–ö–¶–ò–ò ---
    function checkTx(id) {
        const val = normalize(document.getElementById('tx' + id).value);
        let success = false, msg = "";
        
        const hasStart = val.includes('start transaction') || val.includes('begin');
        const hasCommit = val.includes('commit');
        const hasRollback = val.includes('rollback');

        if (id === 1) { // Create Order
            if (hasStart && hasCommit && val.includes('insert into orders') && val.includes('insert into orderdetails')) {
                success = true; msg = "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ç–∞ –µ —É—Å–ø–µ—à–Ω–∞! –ü–æ—Ä—ä—á–∫–∞—Ç–∞ –µ —Å—ä–∑–¥–∞–¥–µ–Ω–∞ —Ü—è–ª–æ—Å—Ç–Ω–æ.";
            } else msg = "–¢—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞ BEGIN, –¥–≤–∞ INSERT-–∞ –∏ –Ω–∞–∫—Ä–∞—è COMMIT.";
        }
        else if (id === 2) { // Rollback Delete
            if (hasStart && hasRollback && val.includes('delete from customers')) {
                success = true; msg = "–°–ø–∞—Å–∏—Ö—Ç–µ –¥–∞–Ω–Ω–∏—Ç–µ! Rollback –≤—ä—Ä–Ω–∞ –∏–∑—Ç—Ä–∏—Ç–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∏.";
            } else msg = "–ó–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ –∑–∞–≤—ä—Ä—à–µ—Ç–µ —Å ROLLBACK, –∑–∞ –¥–∞ –æ—Ç–º–µ–Ω–∏—Ç–µ –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ—Ç–æ.";
        }
        else if (id === 3) { // Mass Update
            if (hasStart && hasCommit && val.includes('update products')) {
                success = true; msg = "–¶–µ–Ω–∏—Ç–µ —Å–∞ –æ–±–Ω–æ–≤–µ–Ω–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ.";
            } else msg = "–ì—Ä—É–ø–∏—Ä–∞–π—Ç–µ UPDATE –∑–∞—è–≤–∫–∞—Ç–∞ –º–µ–∂–¥—É START TRANSACTION –∏ COMMIT.";
        }
        else if (id === 4) { // Move Category
            if (hasStart && hasCommit && val.includes('update products') && val.includes('delete from categories')) {
                success = true; msg = "–ö–∞—Ç–µ–≥–æ—Ä–∏—è—Ç–∞ –µ –ø—Ä–µ–º–µ—Å—Ç–µ–Ω–∞ –∏ —Å—Ç–∞—Ä–∞—Ç–∞ –µ –∏–∑—Ç—Ä–∏—Ç–∞ —É—Å–ø–µ—à–Ω–æ.";
            } else msg = "–¢—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞—Ç–µ –µ–¥–∏–Ω UPDATE, –µ–¥–∏–Ω DELETE –∏ COMMIT –Ω–∞–∫—Ä–∞—è.";
        }
        else if (id === 5) { // Savepoint
            if (hasStart && hasCommit && val.includes('savepoint') && val.includes('rollback to')) {
                success = true; msg = "–û—Ç–ª–∏—á–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ Savepoint!";
            } else msg = "–õ–∏–ø—Å–≤–∞ SAVEPOINT –∏–ª–∏ ROLLBACK TO [ime].";
        }

        showResult('r-tx' + id, success, msg);
    }
</script>

</body>
</html>